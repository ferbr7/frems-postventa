<div class="min-h-screen bg-neutral-50">
  <div class="max-w-7xl mx-auto px-6 py-8">
    <!-- Header degradado (mismo estilo) -->
    <div class="rounded-2xl bg-gradient-to-r from-emerald-700 to-emerald-600 p-6 flex items-center justify-between">
      <div>
        <h1 class="text-2xl font-semibold text-white">Nuevo Usuario</h1>
        <p class="text-emerald-100">Agrega un nuevo usuario</p>
      </div>
      <button type="button" (click)="volver()"
        class="rounded-xl border border-emerald-200/50 bg-emerald-600/30 text-white px-4 py-2 hover:bg-emerald-600/40">
        Volver
      </button>
    </div>

    <!-- Card -->
    <form (ngSubmit)="guardar()" [formGroup]="form"
          class="mt-6 bg-white rounded-2xl border border-slate-200 shadow p-6">

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Nombre -->
        <div>
          <label class="block text-slate-700 mb-2">Nombre *</label>
          <input type="text" formControlName="nombre"
            class="w-full rounded-xl border border-slate-300 bg-white px-4 py-2.5
                   text-slate-900 placeholder-slate-400 outline-none
                   focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-400 shadow-sm">
          <p *ngIf="f.nombre.touched && f.nombre.invalid" class="mt-1 text-sm text-rose-600">
            Nombre es requerido.
          </p>
        </div>

        <!-- Apellido -->
        <div>
          <label class="block text-slate-700 mb-2">Apellido *</label>
          <input type="text" formControlName="apellido"
            class="w-full rounded-xl border border-slate-300 bg-white px-4 py-2.5
                   text-slate-900 placeholder-slate-400 outline-none
                   focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-400 shadow-sm">
          <p *ngIf="f.apellido.touched && f.apellido.invalid" class="mt-1 text-sm text-rose-600">
            Apellido es requerido.
          </p>
        </div>

        <!-- Email -->
        <div>
          <label class="block text-slate-700 mb-2">Correo electrónico *</label>
          <input type="email" formControlName="email"
            class="w-full rounded-xl border border-slate-300 bg-white px-4 py-2.5
                   text-slate-900 placeholder-slate-400 outline-none
                   focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-400 shadow-sm">
          <p *ngIf="f.email.touched && f.email.invalid" class="mt-1 text-sm text-rose-600">
            Correo válido requerido.
          </p>
        </div>

        <!-- Username -->
        <div>
          <label class="block text-slate-700 mb-2">Usuario *</label>
          <input type="text" formControlName="username" placeholder="<auto sugerido>"
            class="w-full rounded-xl border border-slate-300 bg-white px-4 py-2.5
                   text-slate-900 placeholder-slate-400 outline-none
                   focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-400 shadow-sm">
          <p class="mt-1 text-xs text-slate-500">Se sugiere automáticamente a partir del nombre y apellido.</p>
          <p *ngIf="f.username.touched && f.username.invalid" class="mt-1 text-sm text-rose-600">
            Usuario es requerido (mín. 3 caracteres).
          </p>
        </div>

        <!-- Rol -->
        <div>
          <label class="block text-slate-700 mb-2">Rol *</label>
          <select formControlName="rol"
            class="w-full rounded-xl border border-slate-300 bg-white px-4 py-2.5
                   text-slate-900 outline-none focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-400 shadow-sm">
            <option [ngValue]="null" disabled>Selecciona una opción</option>
            <option *ngFor="let r of roles" [ngValue]="r.value">{{ r.label }}</option>
          </select>
          <p *ngIf="f.rol.touched && f.rol.invalid" class="mt-1 text-sm text-rose-600">
            Selecciona un rol.
          </p>
        </div>

        <!-- Fecha ingreso -->
        <div>
          <label class="block text-slate-700 mb-2">Fecha ingreso *</label>
          <input type="date" formControlName="fechaIngreso"
            class="w-full rounded-xl border border-slate-300 bg-white px-4 py-2.5
                   text-slate-900 outline-none focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-400 shadow-sm">
        </div>

        <!-- Estado -->
        <div class="flex items-end">
          <label class="block text-slate-700 mb-2 mr-4">Estado</label>
          <label class="inline-flex items-center cursor-pointer select-none">
            <input type="checkbox" formControlName="activo" class="sr-only">
            <span
              class="relative inline-block w-12 h-7 rounded-full transition
                     bg-slate-200 peer-checked:bg-emerald-500">
              <span
                class="absolute top-1 left-1 w-5 h-5 rounded-full bg-white shadow
                       transition peer-checked:translate-x-5"></span>
            </span>
            <span class="ml-3 text-slate-700">{{ f.activo.value ? 'Activo' : 'Inactivo' }}</span>
          </label>
        </div>
      </div>

      <!-- Nota contraseña -->
      <p class="mt-6 text-sm text-slate-500">
        *La contraseña se generará automáticamente en el servidor y se enviará al correo registrado.
      </p>

      <!-- Botón ancho entre columnas -->
      <div class="mt-6 grid grid-cols-1 md:grid-cols-2">
        <div class="col-span-1 md:col-span-2 flex">
<button type="submit"
  class="mx-auto w-full md:w-[calc(100%-theme(space.6))] md:max-w-none
         rounded-2xl bg-emerald-600 text-white text-lg font-medium
         px-6 py-2.5 hover:bg-emerald-700 transition">
  Registrar Nuevo Usuario
</button>
        </div>
      </div>
    </form>
  </div>
</div>
