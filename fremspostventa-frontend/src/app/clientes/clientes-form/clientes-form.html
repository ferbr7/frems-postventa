<div class="max-w-7xl mx-auto px-6 py-8">
  <!-- Header -->
  <div class="rounded-2xl bg-gradient-to-r from-emerald-700 to-emerald-600 p-6 flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-semibold text-white">{{ title }}</h1>
      <p class="text-emerald-100">{{ subtitle }}</p>
    </div>
    <a [routerLink]="returnTo ?? '/clientes'"
      class="rounded-xl border border-emerald-200/50 bg-emerald-600/30 text-white px-4 py-2 hover:bg-white/10">
      Volver
    </a>
  </div>

  <!-- Form -->
  <form (ngSubmit)="save()" [formGroup]="form"
    class="mt-6 bg-white rounded-2xl border border-slate-200 shadow p-6 grid grid-cols-1 md:grid-cols-2 gap-6">

    <div>
      <label class="block text-slate-700 mb-2">Nombre *</label>
      <input formControlName="nombre" class="w-full rounded-xl border border-slate-300 px-4 py-2.5">
      <p class="text-sm text-rose-600 mt-1" *ngIf="form.get('nombre')?.touched && form.get('nombre')?.invalid">
        Requerido.</p>
    </div>

    <div>
      <label class="block text-slate-700 mb-2">Apellido *</label>
      <input formControlName="apellido" class="w-full rounded-xl border border-slate-300 px-4 py-2.5">
      <p class="text-sm text-rose-600 mt-1" *ngIf="form.get('apellido')?.touched && form.get('apellido')?.invalid">
        Requerido.</p>
    </div>

    <div>
      <label class="block text-slate-700 mb-2">Correo (opcional)</label>
      <input formControlName="email" type="email" class="w-full rounded-xl border border-slate-300 px-4 py-2.5">
      <p class="text-sm text-rose-600 mt-1" *ngIf="form.get('email')?.touched && form.get('email')?.errors?.['email']">
        Formato de correo inválido.
      </p>
    </div>

    <div>
      <label class="block text-slate-700 mb-2">Teléfono *</label>
      <input formControlName="telefono" type="tel" inputmode="numeric" maxlength="8" (input)="onTelefonoInput($event)"
        class="w-full rounded-xl border border-slate-300 px-4 py-2.5" placeholder="8 dígitos">
      <p class="text-sm text-rose-600 mt-1"
        *ngIf="form.get('telefono')?.touched && form.get('telefono')?.errors?.['pattern']">
        Debe tener 8 dígitos.
      </p>
      <p class="text-sm text-rose-600 mt-1" *ngIf="form.get('telefono')?.errors?.['duplicate']">
        Este teléfono ya está en uso.
      </p>
    </div>

    <div class="md:col-span-2">
      <label class="block text-slate-700 mb-2">Dirección *</label>
      <textarea formControlName="direccion" rows="3"
        class="w-full rounded-xl border border-slate-300 px-4 py-2.5"></textarea>
    </div>

    <div>
      <label class="block text-slate-700 mb-2">Fecha ingreso *</label>
      <input formControlName="fechaingreso" type="date" class="w-full rounded-xl border border-slate-300 px-4 py-2.5">
    </div>

    <div>
      <label class="block text-slate-700 mb-2">Última compra *</label>
      <input formControlName="ultimacompra" type="date" class="w-full rounded-xl border border-slate-300 px-4 py-2.5">
    </div>

    <div class="md:col-span-2">
      <button *ngIf="!isView" type="submit"
        class="w-full rounded-2xl bg-emerald-600 text-white text-lg font-medium px-6 py-2.5 hover:bg-emerald-700"
        [disabled]="form.invalid">
        {{ isEdit ? 'Guardar cambios' : 'Registrar Nuevo Cliente' }}
      </button>
    </div>
  </form>
</div>